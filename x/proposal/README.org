#+TITLE: Proposal Module
#+BEGIN_SRC sql :tangle proposal.sql :exports none
  /* GENERATED FROM README.org
     DO NOT EDIT THIS FILE DIRECTLY!!!!! */

#+END_SRC

* Overview

* Motivation and Rationale

* Transaction Messages and Types

#+BEGIN_SRC go
type ProposalID []byte

type MsgCreateProposal struct {
	Proposers []sdk.AccAddress `json:"proposer"`
  Agent     agent.AgentID
	Action ProposalAction `json:"action"`
  TryExec bool `json:"try_exec"`
}

type MsgVote struct {
	ID ProposalID `json:"id"`
	Voters []sdk.AccAddress `json:"voters"`
	Vote bool `json:"vote"`
}

type MsgTryExecuteProposal struct {
	ProposalId []byte `json:"proposal_id"`
	Signer sdk.AccAddress `json:"signer"`
}

type MsgWithdrawProposal struct {
	ProposalId []byte `json:"proposal_id"`
	Proposer sdk.AccAddress `json:"proposer"`
}

type Proposal struct {
	Proposer  sdk.AccAddress   `json:"proposer"`
  Agent     agent.AgentID
	Action    action.Action   `json:"action"`
	Approvers []sdk.AccAddress `json:"approvers,omitempty"`
}

#+END_SRC go

* Identifiers

* Indexing and Queries

** Postgresql
#+BEGIN_SRC sql :tangle proposal.sql
  CREATE TABLE proposal (
    uri text NOT NULL PRIMARY KEY,
    proposer bytea NOT NULL REFERENCES account,
    proposed_at bytea NOT NULL REFERENCES tx,
    "action" jsonb NOT NULL
  );

  CREATE TABLE proposal_approvals (
    uri text NOT NULL REFERENCES proposal,
    approver bytea NOT NULL REFERENCES account,
    voted_at bytea NOT NULL REFERENCES tx
  );
#+END_SRC
** RDF
   Proposals aren't indexed in the RDF store.
